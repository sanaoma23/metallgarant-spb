!function(a,b){function S(b,c){return b=b?' id="'+e+b+'"':"",c=c?' style="'+c+'"':"",a("<div"+b+c+"/>")}function T(a,b){return b="x"===b?w.width():w.height(),"string"==typeof a?Math.round(a.match(/%/)?b/100*parseInt(a,10):parseInt(a,10)):a}function U(b){return b=a.isFunction(b)?b.call(K):b,N.photo||b.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function V(){for(var b in N)a.isFunction(N[b])&&"on"!==b.substring(0,2)&&(N[b]=N[b].call(K));N.rel=N.rel||K.rel||"nofollow",N.href=N.href||a(K).attr("href"),N.title=N.title||K.title}function W(b){if(K=b,N=a.extend({},a(K).data(d)),V(),"nofollow"!==N.rel?(v=a("."+R).filter(function(){var b=a(this).data(d).rel||this.rel;return b===N.rel}),M=v.index(K),M===-1&&(v=v.add(K),M=v.length-1)):(v=a(K),M=0),!O){O=P=!0,L=K;try{L.blur()}catch(a){}a.event.trigger(f),N.onOpen&&N.onOpen.call(K),n.css({opacity:+N.opacity,cursor:N.overlayClose?"pointer":"auto"}).show(),N.w=T(N.initialWidth,"x"),N.h=T(N.initialHeight,"y"),Q.position(0),l&&w.bind("resize."+m+" scroll."+m,function(){n.css({width:w.width(),height:w.height(),top:w.scrollTop(),left:w.scrollLeft()})}).trigger("scroll."+m)}B.add(E).add(D).add(C).add(A).hide(),F.html(N.close).show(),Q.slideshow(),Q.load()}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,c={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:.2,preloading:!0,current:"‘ото {current} из {total}",previous:"previous",next:"next",close:"close",open:!1,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},d="colorbox",e="cbox",f=e+"_open",g=e+"_load",h=e+"_complete",i=e+"_cleanup",j=e+"_closed",k=a.browser.msie&&!a.support.opacity,l=k&&a.browser.version<7,m=e+"_IE6",R=e+"Element";Q=a.fn[d]=a[d]=function(b,e){var f=this;return!f[0]&&f.selector?f:(b=b||{},e&&(b.onComplete=e),f[0]&&void 0!==f.selector||(f=a("<a/>"),b.open=!0),f.each(function(){a(this).data(d,a.extend({},a(this).data(d)||c,b)).addClass(R)}),b.open&&W(f[0]),f)},Q.init=function(){w=a(b),o=S().attr({id:d,class:k?e+"IE":""}),n=S("Overlay",l?"position:absolute":"").hide(),p=S("Wrapper"),q=S("Content").append(x=S("LoadedContent","width:0; height:0"),z=S("LoadingOverlay").add(S("LoadingGraphic")),A=S("Title"),B=S("Current"),D=S("Next"),E=S("Previous"),C=S("Slideshow"),F=S("Close")),p.append(S().append(S("TopLeft"),r=S("TopCenter"),S("TopRight")),S().append(s=S("MiddleLeft"),q,t=S("MiddleRight")),S().append(S("BottomLeft"),u=S("BottomCenter"),S("BottomRight"))).children().children().css({float:"left"}),y=S(!1,"position:absolute; width:9999px; visibility:hidden; display:none"),a("body").prepend(n,o.append(p,y)),q.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover"),G=r.height()+u.height()+q.outerHeight(!0)-q.height(),H=s.width()+t.width()+q.outerWidth(!0)-q.width(),I=x.outerHeight(!0),J=x.outerWidth(!0),o.css({"padding-bottom":G,"padding-right":H}).hide(),D.click(Q.next),E.click(Q.prev),F.click(Q.close),q.children().removeClass("hover"),a("."+R).live("click",function(a){return!!(0!==a.button&&"undefined"!=typeof a.button||a.ctrlKey||a.shiftKey||a.altKey)||(W(this),!1)}),n.click(function(){N.overlayClose&&Q.close()}),a(document).bind("keydown",function(a){O&&N.escKey&&27===a.keyCode&&(a.preventDefault(),Q.close()),O&&N.arrowKey&&!P&&v[1]&&(37===a.keyCode&&(M||N.loop)?(a.preventDefault(),E.click()):39===a.keyCode&&(M<v.length-1||N.loop)&&(a.preventDefault(),D.click()))})},Q.remove=function(){o.add(n).remove(),a("."+R).die("click").removeData(d).removeClass(R)},Q.position=function(a,b){function f(a){r[0].style.width=u[0].style.width=q[0].style.width=a.style.width,z[0].style.height=z[1].style.height=q[0].style.height=s[0].style.height=t[0].style.height=a.style.height}var c,d=Math.max(w.height()-N.h-I-G,0)/2+w.scrollTop(),e=Math.max(w.width()-N.w-J-H,0)/2+w.scrollLeft();c=o.width()===N.w+J&&o.height()===N.h+I?0:a,p[0].style.width=p[0].style.height="9999px",o.dequeue().animate({width:N.w+J,height:N.h+I,top:d,left:e},{duration:c,complete:function(){f(this),P=!1,p[0].style.width=N.w+J+H+"px",p[0].style.height=N.h+I+G+"px",b&&b()},step:function(){f(this)}})},Q.resize=function(a){if(O){if(a=a||{},a.width&&(N.w=T(a.width,"x")-J-H),a.innerWidth&&(N.w=T(a.innerWidth,"x")),x.css({width:N.w}),a.height&&(N.h=T(a.height,"y")-I-G),a.innerHeight&&(N.h=T(a.innerHeight,"y")),!a.innerHeight&&!a.height){var b=x.wrapInner("<div style='overflow:auto'></div>").children();N.h=b.height(),b.replaceWith(b.children())}x.css({height:N.h}),Q.position("none"===N.transition?0:N.speed)}},Q.prep=function(b){function g(){return N.w=N.w||x.width(),N.w=N.mw&&N.mw<N.w?N.mw:N.w,N.w}function j(){return N.h=N.h||x.height(),N.h=N.mh&&N.mh<N.h?N.mh:N.h,N.h}function m(b){var g,i,j,l,m=v.length,n=N.loop;Q.position(b,function(){function b(){k&&o[0].style.removeAttribute("filter")}O&&(k&&c&&x.fadeIn(100),N.iframe&&a("<iframe frameborder=0"+(N.scrolling?"":" scrolling='no'")+(k?" allowtransparency='true'":"")+"/>").appendTo(x).attr({src:N.href,name:(new Date).getTime()}),x.show(),A.show().html(N.title),m>1&&(B.html(N.current.replace(/\{current\}/,M+1).replace(/\{total\}/,m)).show(),D[n||M<m-1?"show":"hide"]().html(N.next),E[n||M?"show":"hide"]().html(N.previous),g=M?v[M-1]:v[m-1],j=M<m-1?v[M+1]:v[0],N.slideshow&&(C.show(),M===m-1&&!n&&o.is("."+e+"Slideshow_on")&&C.click()),N.preloading&&(l=a(j).data(d).href||j.href,i=a(g).data(d).href||g.href,U(l)&&(a("<img/>")[0].src=l),U(i)&&(a("<img/>")[0].src=i))),z.hide(),"fade"===N.transition?o.fadeTo(f,1,function(){b()}):b(),w.bind("resize."+e,function(){Q.position(0)}),a.event.trigger(h),N.onComplete&&N.onComplete.call(K))})}if(O){var c,f="none"===N.transition?0:N.speed;w.unbind("resize."+e),x.remove(),x=S("LoadedContent").html(b),x.hide().appendTo(y.show()).css({width:g(),overflow:N.scrolling?"auto":"hidden"}).css({height:j()}).prependTo(q),y.hide(),a("#"+e+"Photo").css({cssFloat:"none"}),l&&a("select").not(o.find("select")).filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one(i,function(){this.style.visibility="inherit"}),"fade"===N.transition?o.fadeTo(f,0,function(){m(0)}):m(f)}},Q.load=function(){var b,c,f,h=Q.prep;P=!0,K=v[M],N=a.extend({},a(K).data(d)),V(),a.event.trigger(g),N.onLoad&&N.onLoad.call(K),N.h=N.height?T(N.height,"y")-I-G:N.innerHeight&&T(N.innerHeight,"y"),N.w=N.width?T(N.width,"x")-J-H:N.innerWidth&&T(N.innerWidth,"x"),N.mw=N.w,N.mh=N.h,N.maxWidth&&(N.mw=T(N.maxWidth,"x")-J-H,N.mw=N.w&&N.w<N.mw?N.w:N.mw),N.maxHeight&&(N.mh=T(N.maxHeight,"y")-I-G,N.mh=N.h&&N.h<N.mh?N.h:N.mh),b=N.href,z.show(),N.inline?(S("InlineTemp").hide().insertBefore(a(b)[0]).bind(g+" "+i,function(){a(this).replaceWith(x.children())}),h(a(b))):N.iframe?h(" "):N.html?h(N.html):U(b)?(c=new Image,c.onload=function(){var b;c.onload=null,c.id=e+"Photo",a(c).css({margin:"auto",border:"none",display:"block",cssFloat:"left"}),N.scalePhotos&&(f=function(){c.height-=c.height*b,c.width-=c.width*b},N.mw&&c.width>N.mw&&(b=(c.width-N.mw)/c.width,f()),N.mh&&c.height>N.mh&&(b=(c.height-N.mh)/c.height,f())),N.h&&(c.style.marginTop=Math.max(N.h-c.height,0)/2+"px"),setTimeout(function(){h(c)},1),v[1]&&(M<v.length-1||N.loop)&&a(c).css({cursor:"pointer"}).click(Q.next),k&&(c.style.msInterpolationMode="bicubic")},c.src=b):S().appendTo(y).load(b,function(a,b,c){h("error"===b?"Request unsuccessful: "+c.statusText:this)})},Q.next=function(){P||(M=M<v.length-1?M+1:0,Q.load())},Q.prev=function(){P||(M=M?M-1:v.length-1,Q.load())},Q.slideshow=function(){function d(){C.text(N.slideshowStop).bind(h,function(){b=setTimeout(Q.next,N.slideshowSpeed)}).bind(g,function(){clearTimeout(b)}).one("click",function(){a()}),o.removeClass(c+"off").addClass(c+"on")}var a,b,c=e+"Slideshow_";C.bind(j,function(){C.unbind(),clearTimeout(b),o.removeClass(c+"off "+c+"on")}),a=function(){clearTimeout(b),C.text(N.slideshowStart).unbind(h+" "+g).one("click",function(){d(),b=setTimeout(Q.next,N.slideshowSpeed)}),o.removeClass(c+"on").addClass(c+"off")},N.slideshow&&v[1]&&(N.slideshowAuto?d():a())},Q.close=function(){O&&(O=!1,a.event.trigger(i),N.onCleanup&&N.onCleanup.call(K),w.unbind("."+e+" ."+m),n.fadeTo("fast",0),o.stop().fadeTo("fast",0,function(){o.find("iframe").attr("src","about:blank"),x.remove(),o.add(n).css({opacity:1,cursor:"auto"}).hide();try{L.focus()}catch(a){}setTimeout(function(){a.event.trigger(j),N.onClosed&&N.onClosed.call(K)},1)}))},Q.element=function(){return a(K)},Q.settings=c,a(Q.init)}(jQuery,this);